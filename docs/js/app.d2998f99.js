(function(e){function t(t){for(var a,r,o=t[0],c=t[1],l=t[2],u=0,h=[];u<o.length;u++)r=o[u],s[r]&&h.push(s[r][0]),s[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(h.length)h.shift()();return n.push.apply(n,l||[]),i()}function i(){for(var e,t=0;t<n.length;t++){for(var i=n[t],a=!0,o=1;o<i.length;o++){var c=i[o];0!==s[c]&&(a=!1)}a&&(n.splice(t--,1),e=r(r.s=i[0]))}return e}var a={},s={1:0},n=[];function r(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=a,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var d=c;n.push([14,0]),i()})({14:function(e,t,i){e.exports=i("Vtdi")},"3/k0":function(e,t,i){"use strict";var a=i("YD4I"),s=i.n(a);s.a},BPgB:function(e,t,i){},D0QR:function(e,t,i){},EDI0:function(e,t,i){},Kalh:function(e,t,i){},NRr1:function(e,t,i){},Plkz:function(e,t,i){"use strict";var a=i("Pnqn"),s=i.n(a);s.a},Pnqn:function(e,t,i){},Ptey:function(e,t,i){"use strict";var a=i("kUxu"),s=i.n(a);s.a},Tpgz:function(e,t,i){"use strict";var a=i("Kalh"),s=i.n(a);s.a},Vhkd:function(e,t,i){"use strict";var a=i("WjGc"),s=i.n(a);s.a},Vtdi:function(e,t,i){"use strict";i.r(t);i("VRzm");var a=i("Kw5r"),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("transition",{attrs:{name:"fade-down",appear:""}},[i("app-header")],1),i("div",{staticClass:"container-fluid",attrs:{id:"components"}},[i("transition",{attrs:{name:"fade-up",mode:"out-in",appear:""}},["Main View"===e.currentView?i("div",{key:"main",staticClass:"row"},[i("div",{staticClass:"col-md-1"},[i("app-list",{attrs:{contains:"Kasios",items:e.kasiosFileNames,selected:""}})],1),i("div",{staticClass:"col-md-2"},[i("app-list",{attrs:{contains:"Species",items:e.speciesNames,selected:e.selectedSpecies}})],1),i("div",{staticClass:"col-md-5"},[i("app-map-container",{attrs:{kasiosLocations:e.kasiosLocations,dataNest:e.dataNest,"selected-species":e.selectedSpecies}})],1),i("div",{staticClass:"col-md-4",attrs:{id:"audioContainer"}},[i("app-audio-container",{attrs:{contains:"Kasios","representative-data":e.kasiosLocations}}),i("app-audio-container",{attrs:{contains:"Species",representativeData:e.representativeSpecies}})],1)]):e._e(),"Month View"===e.currentView||"Year View"===e.currentView?i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-2"},[i("app-list",{attrs:{contains:"Species",items:e.speciesNames,"current-view":e.currentView,selected:e.selectedSpecies}})],1),i("transition",{attrs:{name:"fade-up",mode:"out-in",appear:""}},["Month View"===e.currentView?i("div",{staticClass:"col-lg-10"},[i("app-month-container",{attrs:{monthNest:e.monthNest,selected:e.selectedSpecies}})],1):e._e(),"Year View"===e.currentView?i("div",{staticClass:"col-lg-10"},[i("app-year-container",{attrs:{dataNest:e.dataNest,selected:e.selectedSpecies}})],1):e._e()])],1):e._e()])],1)],1)},n=[],r=(i("INYr"),i("yt8O"),i("rGqo"),i("ls82"),i("MECJ")),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container-fluid",attrs:{id:"header"}},[i("div",{staticClass:"col-lg-12"},[e._m(0),i("img",{staticClass:"float-right",attrs:{id:"aboutImg",src:"data/icons/about.png",alt:"About this project"},on:{click:e.aboutPage}}),i("div",{staticClass:"btn-group",attrs:{role:"group",id:"toggle","aria-label":"Controls"}},[i("button",{staticClass:"btn btn-light btn-sm",class:{active:"Main View"===e.currentView},attrs:{type:"button"},on:{click:function(t){e.toggleView("Main View")}}},[e._v("Main View\n      ")]),i("button",{staticClass:"btn btn-light btn-sm",class:{active:"Month View"===e.currentView},attrs:{type:"button"},on:{click:function(t){e.toggleView("Month View")}}},[e._v("Month View\n      ")]),i("button",{staticClass:"btn btn-light btn-sm",class:{active:"Year View"===e.currentView},attrs:{type:"button"},on:{click:function(t){e.toggleView("Year View")}}},[e._v("Year View\n      ")])])])])},c=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a",{attrs:{href:"index.html"}},[i("img",{attrs:{src:"data/logo.png",id:"logoImg"}}),i("h3",{staticStyle:{"text-align":"left",display:"inline-block"}},[e._v("Audio Explorer")])])}],l={name:"Header",data:function(){return{currentView:"Main View"}},methods:{toggleView:function(e){Ye.$emit("viewChanged",e),this.currentView=e},aboutPage:function(){var e=this;this.$swal({title:"About",width:640,imageUrl:"/data/logo.png",imageHeight:85,showCloseButton:!0,focusConfirm:!1,html:'Audio Explorer is a data visualization tool \n        that helps researchers analyze location specific audio recordings \n        over time and verify their authenticity.\n        <br>\n        This web app is part of our submission for the \n        <a href="http://www.vacommunity.org/VAST+Challenge+2018+MC1" target="_blank">2018 VAST Challenge. </a>\n        <hr>\n        <i>The Challenge:</i>\n        Kasios Furniture stands accused of using a banned substance in their factory\n        and dumping waste material in the northeast region of the nearby wildlife preserve. \n        Ornithologists say this has directly led to a decrease in the population of the local\n        Rose-crested Blue Pipit. Kasios refrutes this claim and has provided 15 audio files that they say are of\n        recently recorded Pipits from the Preserve which proves they did not harm the species.\n        Provided a large set of recorded bird calls with accurate identifications it is our goal to \n        check the validity of Kasiosâ€™ claim, as well as characterize the patterns of \n        all species in the preserve over time.           \n        ',confirmButtonText:"First-time user?",footer:'<p>Created by Colin Scruggs and Cameron Henkel \n        <a href="https://github.com/chadstolper/vast-challenge-2018-mc1" target="_blank">\n        <img width="16" src="/data/icons/GitHub-Mark-32px.png" alt="">Visit our GitHub</a>\n        </br>\n        Special thanks to Dr. Stolper and the\n        <a href="https://www.southwestern.edu/scope/" target="_blank"> SCOPE program </a>at Southwestern University</p>'}).then(function(t){t.value&&e.$swal.mixin({width:760,animation:!1,confirmButtonText:"Next &rarr;",showCloseButton:!0,progressSteps:["1","2","3","4"]}).queue([{title:"Select a Kasios recording",html:'<img width="720" src="/data/tutorial_gifs/tutorial_1.gif" alt="">\n              <span style="font-weight: 700">1.</span> Prediction tags generated by our machine-learning models are added to the species list <br>\n              <span style="font-weight: 700">2.</span> The location of the recording is plotted on the map <br>\n              <span style="font-weight: 700">3.</span> The audio player loads the clip and shows the waveform or spectrogram\n              '},{title:"Select a species",html:'<img width="720" src="/data/tutorial_gifs/tutorial_2.gif" alt="">\n              <span style="font-weight: 700">1.</span> Heatmap of species recording locations plotted on map <em>(all years of data by default)</em> <br>\n              <span style="font-weight: 700">2.</span> The audio player loads the clip and shows the waveform or spectrogram\n              '},{title:"Map controls",html:'<img width="720" src="/data/tutorial_gifs/tutorial_3.gif" alt="">\n              <span style="font-weight: 700">1.</span> Toggle between point and range selection<br>\n              <span style="font-weight: 700">2.</span> Toggle history allows comparison between two selected ranges or individual years\n              '},{title:"Month / Year View",html:'<img width="720" src="/data/tutorial_gifs/tutorial_4.gif" alt="">\n              <p>View historical data of all species recordings broken down by <br>\n              <span style="font-weight: 700">month</span> (across all years of data) or by each individual <span style="font-weight: 700">year</span> of collected data.\n              ',confirmButtonText:"Done"}])})}}},d=l,u=(i("Vhkd"),i("KHd+")),h=Object(u["a"])(d,o,c,!1,null,"1e0aba56",null),p=h.exports,f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",{staticClass:"list-group list-group-flush"},[i("li",{staticClass:"list-group-item",attrs:{id:"listTitle"}},[e._v(e._s(e.contains)+"\n    "),"Year View"===e.currentView?i("span",{attrs:{id:"check"}},[i("input",{attrs:{type:"checkbox",name:"include",value:"true",checked:""},on:{click:e.toggleEmpty}}),e._v("\n      Include empty")]):e._e()]),e._l(e.items,function(t,a){return i("app-list-item",{key:a,attrs:{value:t,selectedItemInList:e.selectedItem,isA:e.contains}})})],2)},m=[],v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{staticClass:"list-group-item",class:[{selected:e.selected},{kasios:"Kasios"===e.isA},{faded:"Species"===e.isA&&!e.isPrediction&&e.kasiosSelected}],staticStyle:{cursor:"pointer"},on:{click:e.selectItem}},[e._v("\n    "+e._s(e.value)+"\n    "),i("transition",{attrs:{name:"slide-fade"}},[e.isPrediction?i("span",{staticClass:"badge badge-pill badge-dark",style:{"background-color":e.bgColor}},[e._v(e._s(e.predictionValue))]):e._e(),e.isUnknown?i("span",{staticClass:"badge badge-pill badge-warning",attrs:{title:"We could not produce an accurate prediction\n    for this species from the historical recordings\n    and do not believe this is a local species.\n    Please feel free to listen to the audio\n    and find a match."}},[e._v("?")]):e._e()])],1)},g=[],y={name:"ListItem",props:{value:String,selectedItemInList:null,isA:String},data:function(){return{selected:!1,isPrediction:!1,predictionValue:0,bgColor:"",kasiosSelected:!1,isUnknown:!1}},methods:{selectItem:function(){0==this.selected?"Kasios"===this.isA?Me.$emit("itemWasSelected",this):"Species"===this.isA&&Ye.$emit("itemWasSelected",this):"Kasios"===this.isA?Me.$emit("itemWasDeselected"):"Species"===this.isA&&Ye.$emit("itemWasDeselected")},predictionColor:function(e){var t=[[0,[33,97,140]],[100,[204,51,51]]],i=t[0][1],a=t[1][1];this.bgColor="rgb("+this.pickHexValue(a,i,e).join()+")"},pickHexValue:function(e,t,i){var a=i,s=2*a-1,n=(s/1+1)/2,r=1-n,o=[Math.round(e[0]*n+t[0]*r),Math.round(e[1]*n+t[1]*r),Math.round(e[2]*n+t[2]*r)];return o}},watch:{selectedItemInList:function(){this.selectedItemInList===this.value?this.selected=!0:this.selected=!1}},created:function(){var e=this;Me.$on("itemWasDeselected",function(){e.isPrediction&&(e.isPrediction=!1,e.predictionValue=0),e.isUnknown=!1,e.kasiosSelected=!1}),Ye.$on("highlightPredictions",function(t){"Species"===e.isA&&(e.kasiosSelected=!0,e.isPrediction&&(e.isPrediction=!1,e.predictionValue=0),e.value===t.first_guess?(e.isPrediction=!0,e.predictionValue=t.first_confidence,e.predictionColor(t.first)):e.value===t.second_guess?(e.isPrediction=!0,e.predictionValue=t.second_confidence,e.predictionColor(t.second)):e.value===t.third_guess&&(e.isPrediction=!0,e.predictionValue=t.third_confidence,e.predictionColor(t.third))),"Kasios"===e.isA&&(!0===t.unknown?(t.ID===e.value&&(e.isUnknown=!0),console.log(e)):e.isUnkown=!1)}),Ye.$on("viewChanged",function(){e.isPrediction&&(e.isPrediction=!1,e.predictionValue=0),e.kasiosSelected=!1}),Me.$on("itemWasSelected",function(t){e.isUnknown&&e!=t&&(e.isUnknown=!1)}),"Species"===this.isA&&this.value===this.selectedItemInList&&(this.selected=!0)}},b=y,S=(i("Z4ML"),Object(u["a"])(b,v,g,!1,null,"553540ae",null)),w=S.exports,k={name:"List",created:function(){var e=this;"Kasios"===this.contains?(Me.$on("itemWasSelected",function(t){e.selectedItem=t.value}),Me.$on("itemWasDeselected",function(){e.selectedItem=""}),Ye.$on("viewChanged")):"Species"===this.contains&&(Ye.$on("itemWasSelected",function(t){e.selectedItem=t.value}),Ye.$on("itemWasDeselected",function(){e.selectedItem=""}),""!=this.selected&&(this.selectedItem=this.selected))},props:{contains:String,items:Array,currentView:String,selected:String},data:function(){return{selectedItem:"",toggle:!0}},methods:{toggleEmpty:function(){this.toggle=!1,Ye.$emit("toggleEmpty",this.toggle)}},watch:{selected:function(){this.selectedItem=this.selected}},components:{"app-list-item":w}},_=k,D=(i("pcBb"),Object(u["a"])(_,f,m,!1,null,"40814181",null)),C=D.exports,x=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"mapContainer"}},[i("app-map",{attrs:{kasiosLocation:e.kasiosLocation,speciesData:e.speciesData,availableYears:e.availableYears}}),i("app-map-controls",{attrs:{selectedSpecies:e.selectedSpecies,availableYears:e.availableYears,id:"controls"}})],1)},$=[],I=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"map"}},[i("l-map",{ref:"map",attrs:{minZoom:e.minZoom,crs:e.crs}},[i("l-image-overlay",{attrs:{url:e.src,bounds:e.bounds}}),null!=e.kasiosLocation?i("l-marker",{attrs:{"lat-lng":e.kasiosLocation.latlng}},[i("l-popup",{attrs:{content:"Recording "+e.kasiosLocation.name+": ["+e.kasiosLocation.x+", "+e.kasiosLocation.y+"]"}})],1):e._e()],1)],1)},P=[],V=i("RY4O"),M=(i("pmIE"),{name:"Map",props:{kasiosLocation:Object,speciesData:Object,availableYears:Array},data:function(){return{src:"data/Lekagul-Roadways-2018.bmp",bounds:[[-250,-250],[250,250]],minZoom:0,crs:L.CRS.Simple,currentControl:"range",selectedPoint:"",selectedRange:[],selectedHistory:[],heatmapData:[],historyData:[],heatmap:null,history:null,showHistory:!1,numRecords:0,numHistory:0}},components:{LMap:V["LMap"],LImageOverlay:V["LImageOverlay"],LMarker:V["LMarker"],LPopup:V["LPopup"],LLayerGroup:V["LLayerGroup"]},created:function(){var e=this;Ye.$on("selectionToggled",function(t){e.currentControl=t}),Ye.$on("pointChanged",function(t){e.selectedPoint=t}),Ye.$on("rangeChanged",function(t){e.selectedRange=t}),Ye.$on("toggleHistory",function(t){e.showHistory=t}),Ye.$on("historyChanged",function(t){e.selectedHistory=t})},mounted:function(){var e=this.$refs.map.mapObject;e.setView([0,0],0);var t=L.heatLayer(this.$data.historyData,{minOpacity:.85,radius:13,maxZoom:6,gradient:{0:"#fafafa",.75:"#808080",1:"#7F221F"}}).addTo(e);this.$data.history=t;var i=L.heatLayer(this.$data.heatmapData,{minOpacity:.95,radius:13,maxZoom:6,blur:12,gradient:{1:"#ffffe0",.8:"#ffb886",.6:"#ff888d",.4:"#ff4892",.2:"#21618c",0:"#21618c"}}).addTo(e);this.$data.heatmap=i},watch:{currentControl:function(){this.redrawHeatmap(!1)},selectedRange:function(){this.redrawHeatmap(!1)},selectedPoint:function(){this.redrawHeatmap(!1)},selectedHistory:function(){this.showHistory&&this.redrawHeatmap(!0)},showHistory:function(){this.showHistory?this.redrawHeatmap(!0):(this.historyData=[],this.history.setLatLngs(this.historyData))},speciesData:function(){this.heatmapData=[],this.heatmap.setLatLngs(this.heatmapData),this.historyData=[],this.history.setLatLngs(this.historyData)}},methods:{redrawHeatmap:function(e){var t=this;if(void 0!=this.speciesData)if(e){this.numHistory=0,this.historyData=[];var i=this.speciesData.values.findIndex(function(e){return e.key===t.selectedHistory[0]}),a=this.speciesData.values.findIndex(function(e){return e.key===t.selectedHistory[1]});for(r=i;r<=a;r++)this.addYearToHeatmap(r,e);this.history.setLatLngs(this.historyData),Ye.$emit("numberHistoryUpdated",this.numHistory)}else{if(this.heatmapData=[],this.numRecords=0,"range"===this.currentControl)for(var s=this.speciesData.values.findIndex(function(e){return e.key===t.selectedRange[0]}),n=this.speciesData.values.findIndex(function(e){return e.key===t.selectedRange[1]}),r=s;r<=n;r++)this.addYearToHeatmap(r);else if("point"===this.currentControl){var o=this.speciesData.values.findIndex(function(e){return e.key===t.selectedPoint});this.addYearToHeatmap(o)}this.heatmap.setLatLngs(this.heatmapData),Ye.$emit("numberRecordsUpdated",this.numRecords)}},addYearToHeatmap:function(e,t){var i=this;this.speciesData.values[e].values.forEach(function(e){t?(i.historyData.push([2.5*e.Y-250,2.5*e.X-250]),i.numHistory++):(i.heatmapData.push([2.5*e.Y-250,2.5*e.X-250]),i.numRecords++)})}}}),Y=M,T=(i("3/k0"),Object(u["a"])(Y,I,P,!1,null,"2d10b75e",null)),H=T.exports,R=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"controls"}},[""===e.selectedSpecies?i("h6",[e._v("Please select a species")]):"point"===e.toggleText?i("h6",[e._v("Years displayed: "+e._s(e.rangeSlider.value[0])+"-"+e._s(e.rangeSlider.value[1])+"\n        "),i("span",{staticStyle:{"font-size":"12px"}},[e._v(" ("+e._s(e.numRecords)+" record"),1!=e.numRecords?i("span",[e._v("s")]):e._e(),e._v(")")])]):i("h6",[e._v("Year displayed: "+e._s(e.pointSlider.value)+"\n        "),i("span",{staticStyle:{"font-size":"12px"}},[e._v(" ("+e._s(e.numRecords)+" record"),1!=e.numRecords?i("span",[e._v("s")]):e._e(),e._v(")")])]),i("div",{staticClass:"btn-group",attrs:{role:"group",id:"toggle","aria-label":"Controls"}},[i("button",{staticClass:"btn btn-light btn-sm",class:{disabled:""===e.selectedSpecies},attrs:{type:"button"},on:{click:e.toggleHistory}},[e._v(e._s(e.historyText)+" history\n      ")]),i("button",{staticClass:"btn btn-light btn-sm",class:{disabled:""===e.selectedSpecies},attrs:{type:"button"},on:{click:e.toggleSlider}},[e._v("Toggle "+e._s(e.toggleText)+" \n      ")])]),"point"===e.toggleText?i("vue-slider",e._b({ref:"rangeSlider",staticClass:"slider",model:{value:e.rangeSlider.value,callback:function(t){e.$set(e.rangeSlider,"value",t)},expression:"rangeSlider.value"}},"vue-slider",e.rangeSlider,!1)):i("vue-slider",e._b({ref:"pointSlider",staticClass:"slider",model:{value:e.pointSlider.value,callback:function(t){e.$set(e.pointSlider,"value",t)},expression:"pointSlider.value"}},"vue-slider",e.pointSlider,!1)),i("transition",{attrs:{name:"history",mode:"out-in"}},["Hide"===e.historyText?i("h6",[e._v("Comparing with: "+e._s(e.historySlider.value[0])+"-"+e._s(e.historySlider.value[1])+"\n            "),i("span",{staticStyle:{"font-size":"12px"}},[e._v(" ("+e._s(e.numHistory)+" record"),1!=e.numHistory?i("span",[e._v("s")]):e._e(),e._v(")")])]):e._e()]),i("transition",{attrs:{name:"history",mode:"out-in"}},["Hide"===e.historyText?i("vue-slider",e._b({ref:"historySlider",staticClass:"slider",model:{value:e.historySlider.value,callback:function(t){e.$set(e.historySlider,"value",t)},expression:"historySlider.value"}},"vue-slider",e.historySlider,!1)):e._e()],1)],1)},A=[],B=i("b3l/"),O=i.n(B),W={name:"MapControls",props:{selectedSpecies:"",availableYears:Array},data:function(){return{rangeSlider:{value:[],width:"90%",height:4,dotSize:12,disabled:!0,show:!0,tooltip:"hover",piecewise:!0,data:[],useKeyboard:!0,style:{"margin-left":"30px",transition:"0.5s"},processStyle:{backgroundColor:"#21618C"},tooltipStyle:{backgroundColor:"#21618C",borderColor:"#21618C"}},pointSlider:{value:[],width:"90%",height:4,dotSize:12,disabled:!0,show:!0,tooltip:"hover",piecewise:!0,data:[],useKeyboard:!0,processStyle:{display:"none"},style:{"margin-left":"30px"},tooltipStyle:{backgroundColor:"#21618C",borderColor:"#21618C"}},historySlider:{value:[],width:"90%",height:4,dotSize:12,disabled:!0,show:!0,tooltip:"hover",piecewise:!0,data:[],useKeyboard:!0,style:{"margin-top":"10px","margin-left":"30px",transition:"0.5s"},processStyle:{backgroundColor:"#cc3333"},tooltipStyle:{backgroundColor:"#cc3333",borderColor:"#cc3333"}},toggleText:"point",historyText:"Show",numRecords:0,numHistory:0}},watch:{selectedSpecies:function(){""!=this.selectedSpecies?(this.rangeSlider.disabled=!1,this.pointSlider.disabled=!1,this.historySlider.disabled=!1,this.rangeSlider.data=this.availableYears,this.pointSlider.data=this.availableYears,this.historySlider.data=this.availableYears,this.rangeSlider.value=[this.availableYears[0],this.availableYears[this.availableYears.length-1]],this.pointSlider.value=this.rangeSlider.value[0],this.historySlider.value=[this.availableYears[0],this.availableYears[this.availableYears.length-1]]):(this.rangeSlider.disabled=!0,this.pointSlider.disabled=!0,this.historySlider.disabled=!0,this.historyText="Show",Ye.$emit("historyChanged",this.selectedHistory))},selectedRange:function(){Ye.$emit("rangeChanged",this.selectedRange)},selectedPoint:function(){Ye.$emit("pointChanged",this.selectedPoint)},selectedHistory:function(){Ye.$emit("historyChanged",this.selectedHistory)}},methods:{toggleSlider:function(){""!=this.selectedSpecies&&("point"===this.toggleText?(this.toggleText="range",this.pointSlider.value=this.rangeSlider.value[0],Ye.$emit("selectionToggled","point")):(this.toggleText="point",Ye.$emit("selectionToggled","range")))},toggleHistory:function(){""!=this.selectedSpecies&&("Show"===this.historyText?(this.historyText="Hide",Ye.$emit("toggleHistory",!0),"point"===this.toggleText&&(this.toggleText="range",this.pointSlider.value=this.rangeSlider.value[0],Ye.$emit("selectionToggled","point"))):(this.historyText="Show",Ye.$emit("toggleHistory",!1),"range"===this.toggleText&&(this.toggleText="point",Ye.$emit("selectionToggled","range"))))}},computed:{selectedPoint:function(){return this.pointSlider.value},selectedRange:function(){return this.rangeSlider.value},selectedHistory:function(){return this.historySlider.value}},created:function(){var e=this;Ye.$on("numberRecordsUpdated",function(t){e.numRecords=t}),Ye.$on("numberHistoryUpdated",function(t){e.numHistory=t})},components:{vueSlider:O.a}},E=W,j=(i("rGlQ"),Object(u["a"])(E,R,A,!1,null,"260cba12",null)),F=j.exports,K={name:"MapContainer",props:{kasiosLocations:Array,dataNest:Array},data:function(){return{selectedKasios:"",selectedSpecies:"",kasiosLocation:null,speciesData:null,availableYears:[]}},created:function(){var e=this;Me.$on("itemWasSelected",function(t){e.selectedKasios=t.value}),Me.$on("itemWasDeselected",function(){e.selectedKasios=""}),Ye.$on("itemWasSelected",function(t){e.selectedSpecies=t.value}),Ye.$on("itemWasDeselected",function(){e.selectedSpecies=""})},components:{"app-map":H,"app-map-controls":F},watch:{selectedKasios:function(){this.kasiosLocation=this.kasiosLocations[parseInt(this.selectedKasios)-1]},selectedSpecies:function(){var e=this,t=this.dataNest.findIndex(function(t){return t.key===e.selectedSpecies});this.speciesData=this.dataNest[t]},speciesData:function(){if(void 0!=this.speciesData){var e=[];this.speciesData.values.forEach(function(t){"00"!=t.key&&e.push(t.key)}),this.availableYears=e}}}},N=K,U=(i("Tpgz"),Object(u["a"])(N,x,$,!1,null,"7a3e65b0",null)),z=U.exports,Z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container-fluid",attrs:{id:"AudioContainer"}},[i("h5",[e._v(e._s(e.contains)+" Audio: "+e._s(e.selectedAudioFile))]),i("AudioPlayer",{attrs:{audioFile:e.selectedAudioFile,baseDirectory:e.baseAudioDirectory,contains:e.contains,representativeData:e.representativeData}})],1)},G=[],X=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"audio"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:null!==e.audioFile,expression:"audioFile!==null"}]},[i("div",{attrs:{id:e.containsWaveform}}),i("div",{staticClass:"btn-group",attrs:{id:"audioControls"}},[i("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.skipBack}},[i("img",{attrs:{src:"data/icons/media-skip-backward.svg",alt:"Back"}})]),i("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.play}},[i("img",{attrs:{src:"data/icons/"+e.playPauseSymbol+".svg",alt:"Play / Pause"}})]),i("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.skipForward}},[i("img",{attrs:{src:"data/icons/media-skip-forward.svg",alt:"Forward"}})]),i("button",{staticClass:"btn btn-disabled w-100 text-left",attrs:{type:"button"}},[e._v("\n        "+e._s(e.currentTime)+" / "+e._s(e.audioLength)+"\n      ")]),i("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.showSpectrogram}},[e._v("\n        "+e._s(e.waveSpecButton)+"\n      ")])]),i("p",[e._v("File Metadata "),i("br"),i("span",{domProps:{innerHTML:e._s(e.audioMetaData)}})])]),null===e.audioFile?i("div",[e._v("Please select an audio file to analyze")]):e._e()])},J=[],Q=(i("f3/d"),i("3XfG")),q=i.n(Q),ee={name:"Audio",props:{baseDirectory:String,audioFile:null,contains:String,representativeData:null},data:function(){return{playPauseSymbol:"media-play",audioLength:"00:00",currentTime:"00:00",showSpec:!1,waveSurferHeight:128,waveSpecButton:"Show Spectrogram",audioMetaData:null}},computed:{containsWaveform:function(){return this.contains+"Waveform"}},watch:{audioFile:function(){this.resetValues();var e=this;"Species"==this.contains?this.getSpeciesMetadata():this.getKasiosMetadata(),this.waveSurferInstance.load(this.baseDirectory+this.audioFile+".mp3"),this.waveSurferInstance.on("audioprocess",function(){e.playPauseSymbol="media-pause",e.currentTime=new Date(1e3*Math.round(e.waveSurferInstance.getCurrentTime())).toISOString().substr(14,5)}),this.waveSurferInstance.on("finish",function(){e.playPauseSymbol="media-play"}),this.waveSurferInstance.on("ready",function(){e.audioLength=new Date(1e3*Math.round(e.waveSurferInstance.getDuration())).toISOString().substr(14,5)})}},created:function(){var e=this;this.$nextTick(function(){e.waveSurferInstance=q.a.create({container:"#"+e.containsWaveform,pixelRatio:1,scrollParent:!0,normalize:!0,height:e.waveSurferHeight,waveColor:"#a0abbc",progressColor:"#001942"})})},methods:{play:function(){this.waveSurferInstance.playPause(),0==this.waveSurferInstance.isPlaying()?this.playPauseSymbol="media-play":this.playPauseSymbol="media-pause"},skipBack:function(){this.waveSurferInstance.skipBackward()},skipForward:function(){this.waveSurferInstance.skipForward()},showSpectrogram:function(){this.showSpec=!this.showSpec;var e=document.getElementById(this.containsWaveform).childNodes,t=e[0].childNodes,i=t[0],a=t[1].getContext("2d");if(1==this.showSpec){i.style.borderRight="1px solid #DDD",this.waveSpecButton="Show Waveform",this.waveSurferInstance.drawer.clearWave();var s=new Image;s.onload=function(){a.drawImage(s,0,0)},s.src="/data/spectrograms_color/"+this.audioFile+".png"}else i.style.borderRight="1px solid #333",this.waveSpecButton="Show Spectrogram",this.waveSurferInstance.drawer.clearWave(),this.waveSurferInstance.drawBuffer()},resetValues:function(){this.showSpec=!1,this.waveSpecButton="Show Spectrogram",this.currentTime="00:00",this.audioLength="00:00",this.playPauseSymbol="media-play"},getSpeciesMetadata:function(){var e=this,t=this.representativeData.filter(function(t){return t.Species==e.audioFile})[0];this.audioMetaData="<b>Location:</b> ("+t.X+","+t.Y+") <b>Time Recorded:</b> "+t.Time+" - "+t.Date+"<br><b>File ID:</b> "+t["File ID"]+" <b>Quality:</b> "+t.Quality+" <b>Vocalization Type:</b> "+t.Vocalization_type},getKasiosMetadata:function(){var e=this,t=this.representativeData.filter(function(t){return t.name==e.audioFile})[0];this.audioMetaData="<b>Location:</b> ("+t.x+","+t.y+")"}}},te=ee,ie=(i("oVUw"),Object(u["a"])(te,X,J,!1,null,"5d5f2503",null)),ae=ie.exports,se={name:"AudioContainer",created:function(){var e=this;this.selectedAudioFile=null,"Kasios"===this.contains?(this.baseAudioDirectory="/data/test-birds-from-kasios-mp3/",Me.$on("itemWasSelected",function(t){e.selectedAudioFile=t.value}),Me.$on("itemWasDeselected",function(){e.selectedAudioFile=null})):"Species"===this.contains&&(this.baseAudioDirectory="/data/species-mp3/",Ye.$on("itemWasSelected",function(t){e.selectedAudioFile=t.value}),Ye.$on("itemWasDeselected",function(){e.selectedAudioFile=null}))},props:{contains:String,representativeData:null},data:function(){return{selectedAudioFile:String,baseAudioDirectory:String}},components:{AudioPlayer:ae}},ne=se,re=(i("kFtR"),Object(u["a"])(ne,Z,G,!1,null,"294fd958",null)),oe=re.exports,ce=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"monthContainer"}},[i("transition",{attrs:{name:"fade-up-fast",mode:"out-in",appear:""}},[""===e.selectedSpecies?i("h4",[e._v("Please select a species")]):e._e(),i("div",e._l(e.monthData,function(t){return null!=e.monthData?i("app-small-map",{key:t.key,staticClass:"month",attrs:{timeUnit:t}}):e._e()}))])],1)},le=[],de=(i("Z2Ku"),i("L9s1"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{faded:e.empty},attrs:{id:"smallMap"}},[i("h6",[e._v(e._s(e.timeUnit.key)),i("span",{staticStyle:{"font-size":"12px"}},[e._v(" ("+e._s(e.numRecords)+" record"),1!=e.numRecords?i("span",[e._v("s")]):e._e(),e._v(")")])]),i("l-map",{ref:"map",attrs:{minZoom:e.minZoom,crs:e.crs}},[i("l-image-overlay",{attrs:{url:e.src,bounds:e.bounds}})],1)],1)}),ue=[],he={name:"SmallMap",props:{timeUnit:Object},data:function(){return{src:"data/Lekagul-Roadways-2018.bmp",bounds:[[-87,-87],[87,87]],minZoom:0,crs:L.CRS.Simple,heatmapData:[],heatmap:null,numRecords:0}},components:{LMap:V["LMap"],LImageOverlay:V["LImageOverlay"],LMarker:V["LMarker"],LLayerGroup:V["LLayerGroup"]},mounted:function(){var e=this.$refs.map.mapObject;e.setView([0,0],0),e.dragging.disable(),e.touchZoom.disable(),e.doubleClickZoom.disable(),e.scrollWheelZoom.disable();var t=L.heatLayer(this.$data.heatmapData,{minOpacity:1,radius:4,maxZoom:1,blur:.8,gradient:{1:"#ffffe0",.8:"#ffb886",.6:"#ff888d",.4:"#ff4892",.2:"#21618c",0:"#21618c"}}).addTo(e);this.$data.heatmap=t,null!=this.timeUnit&&this.drawHeatmap()},watch:{timeUnit:function(){this.drawHeatmap()}},methods:{drawHeatmap:function(){if(this.heatmapData!=[]&&(this.heatmapData=[],this.heatmap.setLatLngs(this.heatmapData),this.numRecords=0),null!=this.timeUnit.value){var e=this;this.timeUnit.value.values.forEach(function(t){e.heatmapData.push([.87*t.Y-87,.87*t.X-87]),e.numRecords++}),this.heatmap.setLatLngs(this.heatmapData)}}},computed:{empty:function(){return 0===this.numRecords}}},pe=he,fe=(i("Plkz"),Object(u["a"])(pe,de,ue,!1,null,"87df64a0",null)),me=fe.exports,ve={name:"MonthContainer",props:{monthNest:Array,selected:String},data:function(){return{selectedSpecies:"",speciesData:null,months:["January","Februrary","March","April","May","June","July","August","September","October","November","December"],availableMonths:[],monthData:null}},created:function(){var e=this;Ye.$on("itemWasSelected",function(t){e.selectedSpecies=t.value}),Ye.$on("itemWasDeselected",function(){e.selectedSpecies="",e.monthData=null,e.availableMonths=[],e.speciesData=null}),""!=this.selected&&(this.selectedSpecies=this.selected,this.updateSpeciesData())},components:{"app-small-map":me},watch:{selected:function(){this.selectedSpecies=this.selected},selectedSpecies:function(){this.updateSpeciesData()},speciesData:function(){if(void 0!=this.speciesData){var e=[];this.speciesData.values.forEach(function(t){"0/"!=t.key&&e.push(parseInt(t.key))}),this.availableMonths=e;for(var t=[],i=1;i<=12;i++)this.availableMonths.includes(i)?t.push({key:this.months[i-1],value:this.speciesData.values[i-1]}):t.push({key:this.months[i-1],value:null});this.monthData=t}}},methods:{updateSpeciesData:function(){var e=this,t=this.monthNest.findIndex(function(t){return t.key===e.selectedSpecies});this.speciesData=this.monthNest[t]}}},ge=ve,ye=(i("j97y"),Object(u["a"])(ge,ce,le,!1,null,"7be43f0e",null)),be=ye.exports,Se=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"yearContainer"}},[i("transition",{attrs:{name:"fade-up-fast",mode:"out-in",appear:""}},[""===e.selectedSpecies?i("h4",[e._v("Please select a species")]):e._e(),i("div",[i("transition-group",{attrs:{name:"grid"}},e._l(e.yearData,function(t){return null!=e.yearData?i("app-small-map",{key:t.key,staticClass:"year",attrs:{timeUnit:t}}):e._e()}))],1)])],1)},we=[],ke={name:"YearContainer",props:{dataNest:Array,selected:String},data:function(){return{selectedSpecies:"",speciesData:null,availableYears:[],yearData:null,includeBlankYears:!0}},created:function(){var e=this;Ye.$on("itemWasSelected",function(t){e.selectedSpecies=t.value}),Ye.$on("itemWasDeselected",function(){e.selectedSpecies="",e.yearData=null,e.availableYears=[],e.speciesData=null}),Ye.$on("toggleEmpty",function(t){console.log(t),e.includeBlankYears=!e.includeBlankYears}),""!=this.selected&&(this.selectedSpecies=this.selected,this.updateSpeciesData())},components:{"app-small-map":me},watch:{selected:function(){this.selectedSpecies=this.selected},selectedSpecies:function(){this.updateSpeciesData()},speciesData:function(){if(void 0!=this.speciesData){var e=[];this.speciesData.values.forEach(function(t){"00"!=t.key&&e.push(t.key)}),this.availableYears=e,this.calculateYearlyData()}},includeBlankYears:function(){this.calculateYearlyData()}},methods:{calculateYearlyData:function(){for(var e=[],t=this.availableYears[0],i=0,a=t;a<=2018;a++)this.availableYears.includes(a+"")?(e.push({key:a+"",value:this.speciesData.values[i]}),i++):this.includeBlankYears&&e.push({key:a+"",value:null});this.yearData=e},updateSpeciesData:function(){var e=this,t=this.dataNest.findIndex(function(t){return t.key===e.selectedSpecies});this.speciesData=this.dataNest[t]}}},_e=ke,De=(i("Ptey"),Object(u["a"])(_e,Se,we,!1,null,"26894d69",null)),Ce=De.exports,xe=i("VphZ"),Le={name:"app",components:{"app-header":p,"app-list":C,"app-map-container":z,"app-audio-container":oe,"app-month-container":be,"app-year-container":Ce},data:function(){return{allBirds:null,testBirds:null,rawPredictions:null,currentView:"Main View",selectedSpecies:""}},mounted:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xe["b"]("/data/AllBirdsv4-refined.csv");case 2:return this.allBirds=e.sent,e.next=5,xe["b"]("/data/test-birds-location.csv");case 5:return this.testBirds=e.sent,e.next=8,xe["b"]("/data/aggregate_predictions.csv");case 8:this.rawPredictions=e.sent;case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),computed:{kasiosLocations:function(){if(this.testBirds){var e=[];return this.testBirds.forEach(function(t){t.X=+t.X,t.Y=+t.Y;var i={name:t.ID,latlng:[2.5*t.Y-250,2.5*t.X-250],x:t.X,y:t.Y};e.push(i)}),e}},dataNest:function(){if(!this.allBirds)return[];this.allBirds.forEach(function(e){e.Day=e.Date.slice(3,5),e.Month=e.Date.slice(0,2),e.Year=e.Date.slice(6),e.X=+e.X,e.Y=+e.Y,e.Species=e.English_name});var e=xe["c"](this.allBirds).key(function(e){return e.Species}).key(function(e){return e.Year}).sortKeys(xe["a"]).entries(this.allBirds);return e},monthNest:function(){if(!this.allBirds)return[];var e=xe["c"](this.allBirds).key(function(e){return e.Species}).key(function(e){return e.Month}).sortKeys(xe["a"]).entries(this.allBirds);return e},speciesNames:function(){var e=[];return this.dataNest.forEach(function(t){e.push(t.key)}),e},kasiosFileNames:function(){for(var e=[],t=1;t<=15;t++)e.push(""+t);return e},predictions:function(){if(!this.rawPredictions)return[];this.rawPredictions.forEach(function(e){e.first=+e.first_confidence,e.second=+e.second_confidence,e.third=+e.third_confidence,e.first_confidence=Math.round(100*e.first_confidence)+"%",e.second_confidence=Math.round(100*e.second_confidence)+"%",e.third_confidence=Math.round(100*e.third_confidence)+"%","0/7"===e.model_Agreement?e.unknown=!0:e.unknown=!1});var e=xe["c"](this.rawPredictions).key(function(e){return e.ID}).entries(this.rawPredictions);return e},representativeSpecies:function(){if(!this.allBirds)return[];function e(e){return""!==e.Representative}var t=this.allBirds.filter(e);return t}},created:function(){var e=this;Me.$on("itemWasSelected",function(t){var i=e.predictions.findIndex(function(e){return e.key===t.value});Ye.$emit("highlightPredictions",e.predictions[i].values[0])}),Ye.$on("viewChanged",function(t){e.currentView=t,"Main View"===t&&(e.selectedSpecies="")}),Ye.$on("itemWasSelected",function(t){e.selectedSpecies=t.value}),Ye.$on("itemWasDeselected",function(){e.selectedSpecies=""})}},$e=Le,Ie=(i("ZL7j"),Object(u["a"])($e,s,n,!1,null,null,null)),Pe=Ie.exports,Ve=i("YZxl");i.d(t,"kasiosEventBus",function(){return Me}),i.d(t,"speciesEventBus",function(){return Ye}),a["a"].use(Ve["a"]);var Me=new a["a"],Ye=new a["a"];delete L.Icon.Default.prototype._getIconUrl,L.Icon.Default.mergeOptions({iconRetinaUrl:i("WE1v"),iconUrl:i("Y5fm"),shadowUrl:i("4rkx")}),a["a"].config.productionTip=!1,new a["a"]({render:function(e){return e(Pe)}}).$mount("#app")},WjGc:function(e,t,i){},YD4I:function(e,t,i){},Z4ML:function(e,t,i){"use strict";var a=i("kIjS"),s=i.n(a);s.a},ZL7j:function(e,t,i){"use strict";var a=i("EDI0"),s=i.n(a);s.a},fKsD:function(e,t,i){},j97y:function(e,t,i){"use strict";var a=i("fKsD"),s=i.n(a);s.a},kFtR:function(e,t,i){"use strict";var a=i("NRr1"),s=i.n(a);s.a},kIjS:function(e,t,i){},kUxu:function(e,t,i){},oVUw:function(e,t,i){"use strict";var a=i("p4IW"),s=i.n(a);s.a},p4IW:function(e,t,i){},pcBb:function(e,t,i){"use strict";var a=i("BPgB"),s=i.n(a);s.a},rGlQ:function(e,t,i){"use strict";var a=i("D0QR"),s=i.n(a);s.a}});
//# sourceMappingURL=app.d2998f99.js.map